<p align="center">
  <a href="https://docs.mind-elixir.com" target="_blank" rel="noopener noreferrer">
    <img width="150" src="https://raw.githubusercontent.com/ssshooter/mind-elixir-core/master/images/logo2.png" alt="mindelixir logo2">
  </a>
  <h1 align="center">Mind Elixir</h1>
</p>

<p align="center">
  <a href="https://www.npmjs.com/package/mind-elixir">
    <img src="https://img.shields.io/npm/v/mind-elixir" alt="version">
  </a>
  <a href="https://github.com/ssshooter/mind-elixir-core/blob/master/LICENSE">
    <img src="https://img.shields.io/npm/l/mind-elixir" alt="license">
  </a>
  <a href="https://app.codacy.com/gh/ssshooter/mind-elixir-core?utm_source=github.com&utm_medium=referral&utm_content=ssshooter/mind-elixir-core&utm_campaign=Badge_Grade_Settings">
    <img src="https://api.codacy.com/project/badge/Grade/09fadec5bf094886b30cea6aabf3a88b" alt="code quality">
  </a>
  <a href="https://bundlephobia.com/result?p=mind-elixir">
    <img src="https://badgen.net/bundlephobia/dependency-count/mind-elixir" alt="dependency-count">
  </a>
  <a href="https://packagephobia.com/result?p=mind-elixir">
    <img src="https://packagephobia.com/badge?p=mind-elixir" alt="package size">
  </a>
</p>

[English](/readme.md)
[‰∏≠Êñá](/readme/zh.md)
[Espa√±ol](/readme/es.md)
[Fran√ßais](/readme/fr.md)
[Portugu√™s](/readme/pt.md)
[–†—É—Å—Å–∫–∏–π](/readme/ru.md)
[Êó•Êú¨Ë™û](/readme/ja.md)

Mind Elixir - —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç-–∫–∞—Ä—Ç –Ω–∞ JavaScript. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë —Å –ª—é–±—ã–º frontend-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- –õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ—Å—Ç—å
- –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é –ø–ª–∞–≥–∏–Ω–æ–≤
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–∑–ª–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –≤ SVG / PNG / HTML
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å —É–∑–ª—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û—Ç–º–µ–Ω–∞ / –ü–æ–≤—Ç–æ—Ä –¥–µ–π—Å—Ç–≤–∏–π
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
- –ü—Ä–æ—Å—Ç–∞—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è —É–∑–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

<details>
<summary>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</summary>

- [–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å](#–ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å-—Å–µ–π—á–∞—Å)
  - [Playground](#playground)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
  - [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
    - [NPM](#npm)
    - [Script tag](#script-tag)
  - [–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è](#–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
  - [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–Ω—ã—Ö)
  - [–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-—Å–æ–±—ã—Ç–∏–π)
  - [–≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö](#—ç–∫—Å–ø–æ—Ä—Ç-–∏-–∏–º–ø–æ—Ä—Ç-–¥–∞–Ω–Ω—ã—Ö)
  - [–ö–æ–Ω—Ç—Ä–æ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–π](#–∫–æ–Ω—Ç—Ä–æ–ª—å-–æ–ø–µ—Ä–∞—Ü–∏–π)
- [–≠–∫—Å–ø–æ—Ä—Ç –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](#—ç–∫—Å–ø–æ—Ä—Ç-–≤-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
  - [–°–ø–æ—Å–æ–± 1](#—Å–ø–æ—Å–æ–±-1)
  - [–°–ø–æ—Å–æ–± 2](#—Å–ø–æ—Å–æ–±-2)
- [API](#api)
- [–¢–µ–º–∞](#—Ç–µ–º–∞)
- [–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏](#–≥–æ—Ä—è—á–∏–µ-–∫–ª–∞–≤–∏—à–∏)
- [–≠–∫–æ—Å–∏—Å—Ç–µ–º–∞](#—ç–∫–æ—Å–∏—Å—Ç–µ–º–∞)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏](#–±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏)
- [–ö–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã](#–∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã)

</details>

## –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å

![mindelixir](https://raw.githubusercontent.com/ssshooter/mind-elixir-core/master/images/screenshot2.png)

https://mind-elixir.com/

### Playground

- Vanilla JS - https://codepen.io/ssshooter/pen/OJrJowN
- React - https://codesandbox.io/s/mind-elixir-3-x-react-18-x-vy9fcq
- Vue3 - https://codesandbox.io/s/mind-elixir-3-x-vue3-lth484
- Vue2 - https://codesandbox.io/s/mind-elixir-3-x-vue-2-x-5kdfjp

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

https://docs.mind-elixir.com/

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

#### NPM

```bash
npm i mind-elixir -S
```

```javascript
import MindElixir from 'mind-elixir'
```

#### Script tag

```html
<script type="module" src="https://cdn.jsdelivr.net/npm/mind-elixir/dist/MindElixir.js"></script>
```

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```html
<div id="map"></div>
<style>
  #map {
    height: 500px;
    width: 100%;
  }
</style>
```

**Breaking Change** since 1.0.0, `data` should be passed to `init()`, not `options`.

```javascript
import MindElixir from 'mind-elixir'
import example from 'mind-elixir/dist/example1'

let options = {
  el: '#map', // or HTMLDivElement
  direction: MindElixir.LEFT,
  draggable: true, // default true
  contextMenu: true, // default true
  toolBar: true, // default true
  nodeMenu: true, // default true
  keypress: true, // default true
  locale: 'en', // [zh_CN,zh_TW,en,ja,pt,ru] waiting for PRs
  overflowHidden: false, // default false
  mainLinkStyle: 2, // [1,2] default 1
  mouseSelectionButton: 0, // 0 for left button, 2 for right button, default 0
  contextMenuOption: {
    focus: true,
    link: true,
    extend: [
      {
        name: 'Node edit',
        onclick: () => {
          alert('extend menu')
        },
      },
    ],
  },
  before: {
    insertSibling(el, obj) {
      return true
    },
    async addChild(el, obj) {
      await sleep()
      return true
    },
  },
}

let mind = new MindElixir(options)

mind.install(plugin) // install your plugin

// create new map data
const data = MindElixir.new('new topic')
// or `example`
// or the data return from `.getData()`
mind.init(data)

// get a node
MindElixir.E('node-id')
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```javascript
// whole node data structure up to now
const nodeData = {
  topic: 'node topic',
  id: 'bd1c24420cd2c2f5',
  style: { fontSize: '32', color: '#3298db', background: '#ecf0f1' },
  expanded: true,
  parent: null,
  tags: ['Tag'],
  icons: ['üòÄ'],
  hyperLink: 'https://github.com/ssshooter/mind-elixir-core',
  image: {
    url: 'https://raw.githubusercontent.com/ssshooter/mind-elixir-core/master/images/logo2.png', // required
    // you need to query the height and width of the image and calculate the appropriate value to display the image
    height: 90, // required
    width: 90, // required
  },
  children: [
    {
      topic: 'child',
      id: 'xxxx',
      // ...
    },
  ],
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

```javascript
mind.bus.addListener('operation', operation => {
  console.log(operation)
  // return {
  //   name: action name,
  //   obj: target object
  // }

  // name: [insertSibling|addChild|removeNode|beginEdit|finishEdit]
  // obj: target

  // name: moveNode
  // obj: {from:target1,to:target2}
})

mind.bus.addListener('selectNode', node => {
  console.log(node)
})

mind.bus.addListener('expandNode', node => {
  console.log('expandNode: ', node)
})
```

### –≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

```javascript
// data export
const data = mind.getData() // javascript object, see src/example.js
mind.getDataString() // stringify object
mind.getDataMd() // markdown

// data import
// initiate
let mind = new MindElixir(options)
mind.init(data)
// data update
mind.refresh(data)
```

### –ö–æ–Ω—Ç—Ä–æ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–π

```javascript
let mind = new MindElixir({
  // ...
  before: {
    insertSibling(el, obj) {
      console.log(el, obj)
      if (this.currentNode.nodeObj.parent.root) {
        return false
      }
      return true
    },
    async addChild(el, obj) {
      await sleep()
      if (this.currentNode.nodeObj.parent.root) {
        return false
      }
      return true
    },
  },
})
```

## –≠–∫—Å–ø–æ—Ä—Ç –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### –°–ø–æ—Å–æ–± 1

```typescript
const mind = {
  /** mind elixir instance */
}
const downloadPng = async () => {
  const blob = await mind.exportPng() // Get a Blob!
  if (!blob) return
  const url = URL.createObjectURL(blob)
  const a = document.createElement('a')
  a.href = url
  a.download = 'filename.png'
  a.click()
  URL.revokeObjectURL(url)
}
```

### –°–ø–æ—Å–æ–± 2

Install `@ssshooter/modern-screenshot`, then:

```typescript
import { domToPng } from '@ssshooter/modern-screenshot'

const download = async () => {
  const dataUrl = await domToPng(mind.nodes, {
    onCloneNode: node => {
      const n = node as HTMLDivElement
      n.style.position = ''
      n.style.top = ''
      n.style.left = ''
      n.style.bottom = ''
      n.style.right = ''
    },
    padding: 300,
    quality: 1,
  })
  const link = document.createElement('a')
  link.download = 'screenshot.png'
  link.href = dataUrl
  link.click()
}
```

## API

https://github.com/ssshooter/mind-elixir-core/blob/master/api/mind-elixir.api.md

## –¢–µ–º–∞

```javascript
const options = {
  // ...
  theme: {
    name: 'Dark',
    // main lines color palette
    palette: ['#848FA0', '#748BE9', '#D2F9FE', '#4145A5', '#789AFA', '#706CF4', '#EF987F', '#775DD5', '#FCEECF', '#DA7FBC'],
    // overwrite css variables
    cssVar: {
      '--main-color': '#ffffff',
      '--main-bgcolor': '#4c4f69',
      '--color': '#cccccc',
      '--bgcolor': '#252526',
      '--panel-color': '255, 255, 255',
      '--panel-bgcolor': '45, 55, 72',
    },
    // all variables see /src/index.less
  },
  // ...
}

// ...

mind.changeTheme({
  name: 'Latte',
  palette: ['#dd7878', '#ea76cb', '#8839ef', '#e64553', '#fe640b', '#df8e1d', '#40a02b', '#209fb5', '#1e66f5', '#7287fd'],
  cssVar: {
    '--main-color': '#444446',
    '--main-bgcolor': '#ffffff',
    '--color': '#777777',
    '--bgcolor': '#f6f6f6',
  },
})
```

Be aware that Mind Elixir will not observe the change of `prefers-color-scheme`. Please change the theme **manually** when the scheme changes.

## –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

| –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –∫–ª–∞–≤–∏—à   | –§—É–Ω–∫—Ü–∏—è                                |
| ------------------- | -------------------------------------- |
| Enter               | –í—Å—Ç–∞–≤–∏—Ç—å —Å–æ—Å–µ–¥–Ω–∏–π —É–∑–µ–ª                 |
| Tab                 | –í—Å—Ç–∞–≤–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª                 |
| F1                  | –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É                     |
| F2                  | –ù–∞—á–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —É–∑–ª–∞    |
| ‚Üë                   | –í—ã–±—Ä–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É–∑–µ–ª               |
| ‚Üì                   | –í—ã–±—Ä–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —É–∑–µ–ª                |
| ‚Üê / ‚Üí               | –í—ã–±—Ä–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∏–ª–∏ –ø–µ—Ä–≤—ã–π –¥–æ—á–µ—Ä–Ω–∏–π —É–∑–µ–ª |
| PageUp / Alt + ‚Üë    | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —É–∑–µ–ª –≤–≤–µ—Ä—Ö                 |
| PageDown / Alt + ‚Üì  | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —É–∑–µ–ª –≤–Ω–∏–∑                  |
| Ctrl + ‚Üë            | –ò–∑–º–µ–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –±–æ–∫–æ–≤–æ–π|
| Ctrl + ‚Üê            | –ò–∑–º–µ–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ª–µ–≤—ã–π  |
| Ctrl + ‚Üí            | –ò–∑–º–µ–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ø—Ä–∞–≤—ã–π |
| Ctrl + C            | –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —É–∑–µ–ª                |
| Ctrl + V            | –í—Å—Ç–∞–≤–∏—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É–∑–µ–ª            |
| Ctrl + "+"          | –£–≤–µ–ª–∏—á–∏—Ç—å –º–∞—Å—à—Ç–∞–± –∫–∞—Ä—Ç—ã                |
| Ctrl + "-"          | –£–º–µ–Ω—å—à–∏—Ç—å –º–∞—Å—à—Ç–∞–± –∫–∞—Ä—Ç—ã                |
| Ctrl + 0            | –°–±—Ä–æ—Å–∏—Ç—å –º–∞—Å—à—Ç–∞–±                       |

## –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞

- [@mind-elixir/node-menu](https://github.com/ssshooter/node-menu)
- [@mind-elixir/node-menu-neo](https://github.com/ssshooter/node-menu-neo)
- [@mind-elixir/export-xmind](https://github.com/ssshooter/export-xmind)
- [@mind-elixir/export-html](https://github.com/ssshooter/export-html)
- [mind-elixir-react](https://github.com/ssshooter/mind-elixir-react)

PRs are welcome!

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```
pnpm i
pnpm dev
```

Test generated files with `dev.dist.ts`:

```
pnpm build
pnpm link ./
```

Update docs:

```
# Install api-extractor
pnpm install -g @microsoft/api-extractor
# Maintain /src/docs.ts
# Generate docs
pnpm doc
pnpm doc:md
```

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [@viselect/vanilla](https://github.com/simonwep/selection/tree/master/packages/vanilla)

## –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã

–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –≤–∫–ª–∞–¥ –≤ Mind Elixir! –í–∞—à–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å –¥–µ–ª–∞—é—Ç —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª—É—á—à–µ.

<a href="https://github.com/SSShooter/mind-elixir-core/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=SSShooter/mind-elixir-core&columns=6" />
</a>
